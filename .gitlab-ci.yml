# This file is generated by GitLab CI
Build:
  script:
    - cp app/config/parameters.example.yml app/config/parameters.yml
    - composer install --no-dev --prefer-dist --no-interaction --optimize-autoloader
    - rm -f composer.json
    - rm -f composer.lock
    - rm -f .gitignore
    - rm -f phpunit.xml
    - rm -f .gitattributes
    - rm -fr tests
    - rm -fr Tests
    - rm -f app/config/parameters.yml
    - rm -f app/config/parameters.example.yml
    - tar --transform 's,^.,kcore,' -cJ . --exclude=.git > /var/www/temp/builds/klink-core-master.tar.xz
    - tar --transform 's,^.,kcore,' -cz . --exclude=.git > /var/www/temp/builds/klink-core-master.tar.gz
    - rm vendor -fr
  only:
    - master 
